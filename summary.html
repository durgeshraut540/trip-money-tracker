<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summary</title>
    <style>
        /* Your CSS styling here */
    </style>
</head>
<body>
    <header>
        <h1>Summary</h1>
    </header>
    <div id="content">
        <h2>Contributors</h2>
        <table id="contributors-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <h2>Expenses</h2>
        <table id="expenses-table">
            <thead>
                <tr>
                    <th>Expense Name</th>
                    <th>Amount</th>
                    <th>Paid By</th>
                    <th>Comments</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <script>
        const AZURE_STORAGE_ACCOUNT = "durgeshpocstorage";
        const AZURE_CONTAINER_NAME = "tracker";
        const SAS_TOKEN = "sp=racwdl&st=2024-12-28T06:15:39Z&se=2025-03-05T14:15:39Z&sv=2022-11-02&sr=c&sig=3KVwE9SnveqCG37i6kKHN809s2YqbLlSg5UNEhie%2F9c%3D";
        const BLOB_URL = `https://${AZURE_STORAGE_ACCOUNT}.blob.core.windows.net/${AZURE_CONTAINER_NAME}/data.json`;

        const contributorsTable = document.querySelector("#contributors-table tbody");
        const expensesTable = document.querySelector("#expenses-table tbody");

        async function fetchAndRender() {
            try {
                const response = await fetch(`${BLOB_URL}?${SAS_TOKEN}`);
                const data = await response.json();

                // Render contributors
                contributorsTable.innerHTML = data.contributors.map(
                    (c) => `<tr><td>${c.name}</td><td>${c.amount}</td></tr>`
                ).join("");

                // Render expenses
                expensesTable.innerHTML = data.expenses.map(
                    (e) => `<tr><td>${e.name}</td><td>${e.amount}</td><td>${e.paidBy}</td><td>${e.comments}</td></tr>`
                ).join("");
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        // Initialize
        fetchAndRender();
    </script>
</body>
</html>
